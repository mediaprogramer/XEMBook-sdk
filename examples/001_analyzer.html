<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Transaction Analyzer</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="../extlib/coders/convert.js"></script>
	<script src="../xembook2-sdk.js"></script>

<script>
$(function(){

	const LI = "<li>";
	const txType = {
		TRANSFER : "4154",	//済
		REGISTER_NAMESPACE : "414E",	//済
		ADDRESS_ALIAS : "424E",	//済
		MOSAIC_ALIAS : "434E",	//済
		MOSAIC_DEFINITION : "414D",	//済
		MOSAIC_SUPPLY_CHANGE : "424D",	//済
		MODIFY_MULTISIG_ACCOUNT : "4155",
		AGGREGATE_COMPLETE : "4141",	//済
		AGGREGATE_BONDED : "4241",	//済
		LOCK : "4148",		//済
		SECRET_LOCK : "4152",	//済
		SECRET_PROOF : "4252",	//not yet
		MODIFY_ACCOUNT_PROPERTY_ADDRESS : "4150",
		MODIFY_ACCOUNT_PROPERTY_MOSAIC : "4250",
		MODIFY_ACCOUNT_PROPERTY_ENTITY_TYPE : "4350",
		LINK_ACCOUNT : "414C"
	}


	const btnSubmit = document.querySelector( '#btnSubmit' );
	btnSubmit.addEventListener( 'click', evt => {

		var rawtx = $( '#rawtx' ).val();
		analyzeTx(rawtx);

	} );

	function getValueFromArray(ar){

		var res = 0;
		for(var i = 0; i < ar.length; i++){
			res += ar[i] * Math.pow(256,i);
		}
//		console.log(res);
		return res;
	}

	function getRawFromArray(ar){
		return convert.uint8ToHex(new Uint8Array(ar));
	}

	function analyzeTx(rawtx){

		var div = $("#result");
		var ul = $("<ul>").appendTo(div);

		arrayTx = Array.from(convert.hexToUint8(rawtx));

		var size      = arrayTx.splice(0,4);
		var ul2 = buildUl(ul,"size");
		$(LI).append("raw: "   + getRawFromArray(size)).appendTo(ul2);
		$(LI).append("array: " + size).appendTo(ul2);
		$(LI).append("value: " + getValueFromArray(size)).appendTo(ul2);

		var signature = arrayTx.splice(0,64);
		var ul2 = buildUl(ul,"signature");
		$(LI).append("raw: " + getRawFromArray(signature)).appendTo(ul2);

		var res = analyzeSigning(arrayTx,ul);
		var typeHex = res.typeHex;
		arrayTx = res.arrayUnAnalyzed;

		arrayTx = appendInt64(arrayTx,ul,"fee");

//		var fee       = arrayTx.splice(0,8);
//		var feeRaw = getRawFromArray(fee);
//		var feeLow   = getValueFromArray(fee.slice(0,4));
//		var feeHeigh = getValueFromArray(fee.slice(4,8));
//		var feeInt64 = [ feeLow,feeHeigh];
//		var feeValue = Number(uint64.compact([ feeLow,feeHeigh]));
//		var ul2 = buildUl(ul,"fee");
//		$(LI).append("raw: " + feeRaw).appendTo(ul2);
//		$(LI).append("array: [" + fee + "]").appendTo(ul2);
//		$(LI).append("int64: [" + feeInt64 + "]").appendTo(ul2);
//		$(LI).append("value: " + feeValue).appendTo(ul2);

		var deadline  = arrayTx.splice(0,8);
		var deadlineRaw = getRawFromArray(deadline);
		var low = getValueFromArray(deadline.slice(0,4));
		var high =  getValueFromArray(deadline.slice(4,8));
		var deadlineInt64 =  [low,high];
		var deadlineValue = uint64.compact(deadlineInt64);
		var ul2 = buildUl(ul,"deadline");
		$(LI).append("raw: " + deadlineRaw).appendTo(ul2);
		$(LI).append("array: [" + deadline + "]").appendTo(ul2);
		$(LI).append("int64: [" + deadlineInt64 + "]").appendTo(ul2);
		$(LI).append("value: " + deadlineValue).appendTo(ul2);
		$(LI).append("date: " + dispTimeStamp(deadlineValue)).appendTo(ul2);
//		apendRaw(ul,deadline);

		if(typeHex == txType.TRANSFER){					arrayTx = analyzeTransfer(arrayTx,ul);
		}else if(typeHex == txType.MOSAIC_DEFINITION){    arrayTx = analyzeMosaicDefinition(arrayTx,ul);
		}else if(typeHex == txType.MOSAIC_SUPPLY_CHANGE){ arrayTx = analyzeMosaicSupplyChange(arrayTx,ul);
		}else if(typeHex == txType.LOCK){

			arrayTx = analyzeMosaic(arrayTx,ul);

			arrayTx = appendInt64(arrayTx,ul,"duration");

//			var duration       = arrayTx.splice(0,8);
//			var durationRaw = getRawFromArray(duration);
//			var durationLow   = getValueFromArray(duration.slice(0,4));
//			var durationHeigh = getValueFromArray(duration.slice(4,8));
//			var durationInt64 = [ durationLow,durationHeigh];
//			var durationValue = Number(uint64.compact([ durationLow,durationHeigh]));
//			var childUl = buildUl(ul,"duration");
//			$(LI).append("raw: " + durationRaw).appendTo(childUl);
//			$(LI).append("array: [" + duration + "]").appendTo(childUl);
//			$(LI).append("int64: [" + durationInt64 + "]").appendTo(childUl);
//			$(LI).append("value: " + durationValue).appendTo(childUl);

			var hash    = arrayTx.splice(0,32);
			var ul2 = buildUl(ul,"hash");
			$(LI).append("raw: " + getRawFromArray(hash)).appendTo(ul2);

		}else if(typeHex == txType.REGISTER_NAMESPACE){

			arrayTx = appendType(arrayTx,ul,"namespace_type");
//			var namespaceType = arrayTx.splice(0,1);
//			var childUl = buildUl(ul,"namespace_type");
//			$(LI).append("raw: "   + getRawFromArray(namespaceType)  ).appendTo(childUl);
//			$(LI).append("value: "   + getValueFromArray(namespaceType)  ).appendTo(childUl);

			arrayTx = appendInt64(arrayTx,ul,"duration");

//			var duration       = arrayTx.splice(0,8);
//			var durationRaw = getRawFromArray(duration);
//			var durationLow   = getValueFromArray(duration.slice(0,4));
//			var durationHeigh = getValueFromArray(duration.slice(4,8));
//			var durationInt64 = [ durationLow,durationHeigh];
//			var durationValue = Number(uint64.compact([ durationLow,durationHeigh]));
//			var childUl = buildUl(ul,"duration");
//			$(LI).append("raw: " + durationRaw).appendTo(childUl);
//			$(LI).append("array: [" + duration + "]").appendTo(childUl);
//			$(LI).append("int64: [" + durationInt64 + "]").appendTo(childUl);
//			$(LI).append("value: " + durationValue).appendTo(childUl);

			arrayTx = appendId(arrayTx,ul,"namespace_id");

//			var namespaceId = arrayTx.splice(0,8);
//			var childUl = buildUl(ul,"namespace_id");
//			$(LI).append("raw: "   + getRawFromArray(namespaceId) ).appendTo(childUl);

			var namespaceNameLength      = arrayTx.splice(0,1);
			var namespaceNameLengthValue = getValueFromArray(namespaceNameLength);
			var ul2 = buildUl(ul,"namespace_name_length");
			$(LI).append("raw: "   + getRawFromArray(namespaceNameLength)).appendTo(ul2);
			$(LI).append("value: " + namespaceNameLengthValue).appendTo(ul2);

			namespaseName = arrayTx.splice(0,namespaceNameLengthValue );
			namespaseNameRaw = getRawFromArray(namespaseName);

			childUl = buildUl(ul,"namespace_name");
			$(LI).append("raw: "   + getRawFromArray(namespaseName) ).appendTo(childUl);
			$(LI).append("value: "   + dispPayload(namespaseNameRaw,0) ).appendTo(childUl);

		}else if(typeHex == txType.ADDRESS_ALIAS){

			arrayTx = appendType(arrayTx,ul,"action_type");

//			var actionType = arrayTx.splice(0,1);
//			var childUl = buildUl(ul,"action_type");
//			$(LI).append("raw: "   + getRawFromArray(actionType)  ).appendTo(childUl);
//			$(LI).append("value: " + getValueFromArray(actionType)  ).appendTo(childUl);

			arrayTx = appendId(arrayTx,ul,"namespace_id");

//			var namespaceId = arrayTx.splice(0,8);
//			var childUl = buildUl(ul,"namespace_id");
//			$(LI).append("raw: "   + getRawFromArray(namespaceId) ).appendTo(childUl);

			var recipient = arrayTx.splice(0,25);
			var recipientRaw = getRawFromArray(recipient);
			var childUl = buildUl(ul,"recipient");
			$(LI).append("raw: "   + recipientRaw  ).appendTo(childUl);


		}else if(typeHex == txType.MOSAIC_ALIAS){

			arrayTx = appendType(arrayTx,ul,"action_type");
//			var actionType = arrayTx.splice(0,1);
//			var childUl = buildUl(ul,"action_type");
//			$(LI).append("raw: "   + getRawFromArray(actionType)  ).appendTo(childUl);
//			$(LI).append("value: " + getValueFromArray(actionType)  ).appendTo(childUl);

			arrayTx = appendId(arrayTx,ul,"namespace_id");
//			var namespaceId = arrayTx.splice(0,8);
//			var childUl = buildUl(ul,"namespace_id");
//			$(LI).append("raw: "   + getRawFromArray(namespaceId) ).appendTo(childUl);

			arrayTx = appendId(arrayTx,ul,"mosaic_id");
//			var mosaicId = arrayTx.splice(0,8);
//			var childUl = buildUl(ul,"mosaic_id");
//			$(LI).append("raw: "   + getRawFromArray(mosaicId) ).appendTo(childUl);

		}else if(typeHex == txType.SECRET_LOCK){

			arrayTx = analyzeMosaic(arrayTx,ul);

			arrayTx = appendInt64(arrayTx,ul,"duration");

//			var duration       = arrayTx.splice(0,8);
//			var durationRaw = getRawFromArray(duration);
//			var durationLow   = getValueFromArray(duration.slice(0,4));
//			var durationHeigh = getValueFromArray(duration.slice(4,8));
//			var durationInt64 = [ durationLow,durationHeigh];
//			var durationValue = Number(uint64.compact([ durationLow,durationHeigh]));
//			var childUl = buildUl(ul,"duration");
//			$(LI).append("raw: " + durationRaw).appendTo(childUl);
//			$(LI).append("array: [" + duration + "]").appendTo(childUl);
//			$(LI).append("int64: [" + durationInt64 + "]").appendTo(childUl);
//			$(LI).append("value: " + durationValue).appendTo(childUl);

			arrayTx = appendType(arrayTx,ul,"hash_algorithm");

//			var hashAlgorithm = arrayTx.splice(0,1);
//			var childUl = buildUl(ul,"hash_algorithm");
//			$(LI).append("raw: "   + getRawFromArray(hashAlgorithm)  ).appendTo(childUl);
//			$(LI).append("value: "   + getValueFromArray(hashAlgorithm)  ).appendTo(childUl);

			var secret    = arrayTx.splice(0,32);
			var ul2 = buildUl(ul,"secret");
			$(LI).append("raw: " + getRawFromArray(secret)).appendTo(ul2);

			recipient = arrayTx.splice(0,25);
			var recipientRaw = getRawFromArray(recipient);
			childUl = buildUl(ul,"recipient");
			$(LI).append("raw: "   + recipientRaw  ).appendTo(childUl);

		}else if(typeHex == txType.MODIFY_ACCOUNT_PROPERTY_ADDRESS){


			arrayTx = appendType(arrayTx,ul,"property_type");
//			var propertyType = arrayTx.splice(0,1);
//			var childUl = buildUl(ul,"property_type");
//			$(LI).append("raw: "   + getRawFromArray(propertyType)  ).appendTo(childUl);
//			$(LI).append("value: "   + getValueFromArray(propertyType)  ).appendTo(childUl);

			var modificationCount = arrayTx.splice(0,1);
			var modificationCountValue = getValueFromArray(modificationCount);
			var childUl = buildUl(ul,"modification_count");
			$(LI).append("raw: "   + getRawFromArray(modificationCount)  ).appendTo(childUl);
			$(LI).append("value: "   + modificationCountValue  ).appendTo(childUl);

			for(var i = 0; i < modificationCountValue; i++){

				$(LI).append(i).appendTo(childUl);
				var indexUl = $("<ul>").appendTo(childUl);


				arrayTx = appendType(arrayTx,indexUl,"modification_type");
//				var modificationType = arrayTx.splice(0,1);
//				var modiUl = buildUl(indexUl,"modification_type");
//				$(LI).append("raw: "   + getRawFromArray(modificationType)  ).appendTo(modiUl);
//				$(LI).append("value: "   + getValueFromArray(modificationType)  ).appendTo(modiUl);


				address = arrayTx.splice(0,25);
				var recipientRaw = getRawFromArray(address);
				var modiUl = buildUl(indexUl,"address");
				$(LI).append("raw: "   + recipientRaw  ).appendTo(modiUl);

			}


		}else if(typeHex == txType.AGGREGATE_COMPLETE || typeHex == txType.AGGREGATE_BONDED){		//アグリゲートコンプリート

			var size  = arrayTx.splice(0,4);
			ul2 = buildUl(ul,"size");
			$(LI).append("raw: " + getRawFromArray(size)).appendTo(ul2);
			$(LI).append("array: [" + size + "]").appendTo(ul2);
			$(LI).append("value: " + getValueFromArray(size)).appendTo(ul2);

			while(arrayTx.length > 0){

				//body
				var ul2 = buildUl(ul,"body");

				//size
				var size = arrayTx.splice(0,4);
				var ul3 = buildUl(ul2,"size");
				$(LI).append("raw: "   + getRawFromArray(size)).appendTo(ul3);
				$(LI).append("array: " + size).appendTo(ul3);
				$(LI).append("value: " + getValueFromArray(size)).appendTo(ul3);

				var res = analyzeSigning(arrayTx,ul2); //signer version type
				var typeHex = res.typeHex;
				arrayTx = res.arrayUnAnalyzed;

				if(typeHex == txType.TRANSFER){					  arrayTx = analyzeTransfer(arrayTx,ul2);				//トランスファー
				}else if(typeHex == txType.MOSAIC_DEFINITION   ){ arrayTx = analyzeMosaicDefinition(arrayTx,ul2);				//モザイク定義
				}else if(typeHex == txType.MOSAIC_SUPPLY_CHANGE){ arrayTx = analyzeMosaicSupplyChange(arrayTx,ul2);
				}
			}//while
		}
	}

	function appendType(arrayTx,parentUl,type_name){
		var type = arrayTx.splice(0,1);
		var ul = buildUl(parentUl,type_name);
		$(LI).append("raw: "   + getRawFromArray(  type)).appendTo(ul);
		$(LI).append("value: " + getValueFromArray(type)).appendTo(ul);
		return arrayTx;
	}
	function appendId(arrayTx,parentUl,id_name){
		var id = arrayTx.splice(0,8);
		var ul = buildUl(parentUl,id_name);
		$(LI).append("raw: "   + getRawFromArray(id) ).appendTo(ul);
		return arrayTx;

	}

	function appendInt64(arrayTx,parentUl,int64_name){

		var int64       = arrayTx.splice(0,8);
		var int64Raw = getRawFromArray(int64);
		var int64Low   = getValueFromArray(duration.slice(0,4));
		var int64Heigh = getValueFromArray(duration.slice(4,8));
		var int64Array = [ durationLow,durationHeigh];
		var int64Value = Number(uint64.compact([ int64Low,int64Heigh]));
		var ul = buildUl(parentUl,int64_name);
		$(LI).append("raw: " + int64Raw).appendTo(ul);
		$(LI).append("array: [" + int64 + "]").appendTo(ul);
		$(LI).append("int64: [" + int64Array + "]").appendTo(ul);
		$(LI).append("value: " + int64Value).appendTo(ul);

		return arrayTx;

	}

	function analyzeMosaicSupplyChange(arrayTx,ul){

		arrayTx = appendId(arrayTx,ul,"mosaic_id");

//		var mosaicId = arrayTx.splice(0,8);
//		var ul = buildUl(parentUl,"mosaic_id");
//		$(LI).append("raw: "   + getRawFromArray(mosaicId) ).appendTo(ul);


		arrayTx = appendType(arrayTx,ul,"direction");
//		var direction = arrayTx.splice(0,1);
//		var ul = buildUl(parentUl,"direction");
//		$(LI).append("raw: "   + getRawFromArray(direction)  ).appendTo(ul);
//		$(LI).append("value: "   + getValueFromArray(direction)  ).appendTo(ul);

		arrayTx = appendInt64(arrayTx,ul,"delta");

//		var delta      = arrayTx.splice(0,8);
//		var deltaRaw   = getRawFromArray(delta);
//		var deltaLow   = getValueFromArray(delta.slice(0,4));
//		var deltaHeigh = getValueFromArray(delta.slice(4,8));
//		var deltaInt64 = [ deltaLow, deltaHeigh ];
//		var deltaValue = Number(uint64.compact([ deltaLow,deltaHeigh]));

//		var ul = buildUl(parentUl,"delta");
//		$(LI).append("raw: " + deltaRaw).appendTo(ul);
//		$(LI).append("array: [" + delta + "]").appendTo(ul);
//		$(LI).append("int64: [" + deltaInt64 + "]").appendTo(ul);
//		$(LI).append("value: " + deltaValue).appendTo(ul);

		return arrayTx;
	}

	function analyzeMosaicDefinition(arrayTx,ul){

		var nonse  = arrayTx.splice(0,4);
		var childUl = buildUl(ul,"nonse");
		$(LI).append("raw: " + getRawFromArray(nonse)).appendTo(childUl);


		arrayTx = appendId(arrayTx,ul,"mosaic_id");
//		var mosaicId = arrayTx.splice(0,8);
//		var childUl = buildUl(ul,"mosaic_id");
//		$(LI).append("raw: "   + getRawFromArray(mosaicId) ).appendTo(childUl);

		arrayTx = appendType(arrayTx,ul,"duration_provided");
//		var durationProvided = arrayTx.splice(0,1);
//		var childUl = buildUl(ul,"duration_provided");
//		$(LI).append("raw: "   + getRawFromArray(durationProvided)  ).appendTo(childUl);
//		$(LI).append("value: "   + getValueFromArray(durationProvided)  ).appendTo(childUl);

		arrayTx = appendType(arrayTx,ul,"flags");
//		var flags = arrayTx.splice(0,1);
//		var childUl = buildUl(ul,"flags");
//		$(LI).append("raw: "   + getRawFromArray(flags)  ).appendTo(childUl);
//		$(LI).append("value: "   + getValueFromArray(flags)  ).appendTo(childUl);

		var divisibirity = arrayTx.splice(0,1);
		var childUl = buildUl(ul,"divisibirity");
		$(LI).append("raw: "   + getRawFromArray(divisibirity)  ).appendTo(childUl);
		$(LI).append("value: "   + getValueFromArray(divisibirity)  ).appendTo(childUl);

		if(durationProvided == 1){

			arrayTx = appendType(arrayTx,ul,"indicate_duration");

//			var indicateDuration = arrayTx.splice(0,1);
//			var childUl = buildUl(ul,"indicate_duration");
//			$(LI).append("raw: "   + getRawFromArray(indicateDuration)  ).appendTo(childUl);
//			$(LI).append("value: "   + getValueFromArray(indicateDuration)  ).appendTo(childUl);


			arrayTx = appendInt64(arrayTx,ul,"duration");
//			var duration       = arrayTx.splice(0,8);
//			var durationRaw = getRawFromArray(duration);
//			var durationLow   = getValueFromArray(duration.slice(0,4));
//			var durationHeigh = getValueFromArray(duration.slice(4,8));
//			var durationInt64 = [ durationLow,durationHeigh];
//			var durationValue = Number(uint64.compact([ durationLow,durationHeigh]));
//			var childUl = buildUl(ul,"duration");
//			$(LI).append("raw: " + durationRaw).appendTo(childUl);
//			$(LI).append("array: [" + duration + "]").appendTo(childUl);
//			$(LI).append("int64: [" + durationInt64 + "]").appendTo(childUl);
//			$(LI).append("value: " + durationValue).appendTo(childUl);
		}
		return arrayTx;

	}

	//署名者、バージョン、転送タイプ
	function analyzeSigning(arrayTx,ul){

		var signer    = arrayTx.splice(0,32);
		var ul2 = buildUl(ul,"signer");
		$(LI).append("raw: " + getRawFromArray(signer)).appendTo(ul2);

		//version
		var version   = arrayTx.splice(0,2);
		var versionRaw = getRawFromArray(version)
		var versionHex = versionRaw.substr(2,2) + versionRaw.substr(0,2);
		var ul2 = buildUl(ul,"version");
		$(LI).append("raw: " + versionRaw).appendTo(ul2);
		$(LI).append("hex: 0x" + versionHex).appendTo(ul2);
		$(LI).append("value: " + getValueFromArray(version) ).appendTo(ul2);

		//type
		var type      = arrayTx.splice(0,2);
		var typeRaw = getRawFromArray(type);
		var typeHex = typeRaw.substr(2,2) + typeRaw.substr(0,2);
		var ul2 = buildUl(ul,"type");
		$(LI).append("raw: " + typeRaw).appendTo(ul2);
		$(LI).append("array: " + type).appendTo(ul2);
		$(LI).append("hex: 0x" + typeHex).appendTo(ul2);
		$(LI).append("value: " + getValueFromArray(type)).appendTo(ul2);

		return {typeHex:typeHex,arrayUnAnalyzed:arrayTx};
	}

	//転送
	function analyzeTransfer(arrayTx,ul){

		recipient = arrayTx.splice(0,25);
		var recipientRaw = getRawFromArray(recipient);
		childUl = buildUl(ul,"recipient");
		$(LI).append("raw: "   + recipientRaw  ).appendTo(childUl);

		messageSize = arrayTx.splice(0,2);
		messageSizeValue = getValueFromArray(messageSize) ;
		childUl = buildUl(ul,"message_size");
		$(LI).append("raw: "   + getRawFromArray(messageSize)  ).appendTo(childUl);
		$(LI).append("value: "   +  messageSizeValue).appendTo(childUl);

		mosaicNumber = arrayTx.splice(0,1);
		var mosaicNumberValue = getValueFromArray(mosaicNumber);
		childUl = buildUl(ul,"mosaic_number");
		$(LI).append("raw: "   + getRawFromArray(mosaicNumber)  ).appendTo(childUl);
		$(LI).append("value: "   + getValueFromArray(mosaicNumber)  ).appendTo(childUl);

		arrayTx = appendType(arrayTx,ul,"message_type");

//		messageType = arrayTx.splice(0,1);
//		childUl = buildUl(ul,"message_type");
//		$(LI).append("raw: "   + getRawFromArray(messageType)  ).appendTo(childUl);
//		$(LI).append("value: "   + getValueFromArray(messageType)  ).appendTo(childUl);

		message = arrayTx.splice(0,messageSizeValue - 1);
		messageRaw = getRawFromArray(message);
		childUl = buildUl(ul,"message");
		$(LI).append("raw: "   + messageRaw ).appendTo(childUl);
		$(LI).append("value: "   + dispPayload(messageRaw,0) ).appendTo(childUl);

		$(LI).append("mosaics").appendTo(ul);
		childUl = $("<ul>").appendTo(ul);

		for(var i = 0; i < mosaicNumberValue; i++){

			$(LI).append(i).appendTo(childUl);
			var indexUl = $("<ul>").appendTo(childUl);
			arrayTx = analyzeMosaic(arrayTx,indexUl);
		}
		return arrayTx;

	}

	function analyzeMosaic(arrayTx,ul){


		mosaicId = arrayTx.splice(0,8);
		childUl = buildUl(ul,"mosaic_id");
		$("<li>").append("raw: "   + getRawFromArray(mosaicId) ).appendTo(childUl);

//		mosaicAmount = arrayTx.splice(0,8);
//		childUl = buildUl(ul,"mosaic_amount");
//		$("<li>").append("raw: "   + getRawFromArray(mosaicAmount) ).appendTo(childUl);

		arrayTx = appendInt64(arrayTx,ul,"mosaic_amount");

//		var mosaicAmount       = arrayTx.splice(0,8);
//		var mosaicAmountRaw = getRawFromArray(mosaicAmount);
//		var mosaicAmountLow   = getValueFromArray(mosaicAmount.slice(0,4));
//		var mosaicAmountHeigh = getValueFromArray(mosaicAmount.slice(4,8));
//		var mosaicAmountInt64 = [ mosaicAmountLow,mosaicAmountHeigh];
//		var mosaicAmountValue = Number(uint64.compact([ mosaicAmountLow,mosaicAmountHeigh]));
//		var childUl = buildUl(ul,"mosaic_amount");
//		$(LI).append("raw: " + mosaicAmountRaw).appendTo(childUl);
//		$(LI).append("array: [" + mosaicAmount + "]").appendTo(childUl);
//		$(LI).append("int64: [" + mosaicAmountInt64 + "]").appendTo(childUl);
//		$(LI).append("value: " + mosaicAmountValue).appendTo(childUl);


		return arrayTx;

	}

	function buildUl(ul,item){

		$(LI).append(item).appendTo(ul);
		var childUl = $("<ul>").appendTo(ul);
		return childUl;
	}

});
	</script>
</head>
<body>

<div class="container">

<h1>Transaction Analyzer</h1>

	<div class="form-group">
	    <label for="exampleFormControlTextarea1">Input your transaction</label>
	    <textarea class="form-control" id="rawtx" rows="8">5C010000FD779D1D31E30D0D80346F0DDD1F946B52BFF3FCF9D582F96AAE642810BCCC663C99C1AEC0CA1118C751928B925A9D9DBF6AB4DA5B3861DE6C5793F5E73F700FFF6E61F2A0440FB09CA7A530C0C64A275ADA3A13F60D1EC916D7F1543D7F057402904141000000000000000047CA8B9F17000000E000000070000000FF6E61F2A0440FB09CA7A530C0C64A275ADA3A13F60D1EC916D7F1543D7F0574039054419081FCCB41F8C8409A9B99E485E0E28D23BD6304EF7215E01A1C000100E697A5E69CACE8AA9EE381A7E38282E5A4A7E4B888E5A4ABE38082D787D9329996A177000000000000000070000000FF6E61F2A0440FB09CA7A530C0C64A275ADA3A13F60D1EC916D7F1543D7F0574039054419081FCCB41F8C8409A9B99E485E0E28D23BD6304EF7215E01A1C000100E697A5E69CACE8AA9EE381A7E38282E5A4A7E4B888E5A4ABE38082D787D9329996A1770000000000000000</textarea>
	<button type="submit" id="btnSubmit" class="btn btn-primary">analyze</button>

	</div>

	<div id="result" ></div>


    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>
